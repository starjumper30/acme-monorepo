<div class="movie-list-header">
  <mat-form-field>
    <mat-label>Genre</mat-label>
    <mat-select [formControl]="selectedGenre">
      <mat-option>--</mat-option>
      @for (genre of genres(); track genre.title) {
      <mat-option [value]="genre.title">{{genre.title}}</mat-option>
      }
    </mat-select>
  </mat-form-field>
  <mat-paginator
    [length]="totalMovies()"
    [pageSize]="pageSettings().perPage"
    [pageSizeOptions]="[6, 9, 30, 99]"
    [pageIndex]="pageSettings().page - 1"
    (page)="onPageChange($event)"
    aria-label="Select page"
  >
  </mat-paginator>
  @if(genresLoadingError()) {
  <mat-error>{{genresLoadingError()?.message}}</mat-error>
  } @if (isLoadingMovies()) {
  <p>Loading movies...</p>
  } @else if (moviesLoadingError()){ {{moviesLoadingError()?.message}} }
</div>

<acme-movie-card-list
  [selectedGenre]="selectedGenre.value ?? ''"
  [movies]="movies()"
></acme-movie-card-list>
